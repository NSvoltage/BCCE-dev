version: 1
workflow: "Agent test workflow"
model: anthropic.claude-3-5-sonnet-20241022-v2:0
guardrails: ["pii-basic", "secrets-default"]

env:
  max_runtime_seconds: 600
  artifacts_dir: .bcce_runs/${RUN_ID}

steps:
  - id: agent_step
    type: agent
    policy:
      timeout_seconds: 300
      max_files: 50
      max_edits: 10
      allowed_paths: ["src/**", "test/**"]
      cmd_allowlist: ["npm", "yarn", "pytest"]
    available_tools: [ReadFile, Search, Diff, Apply]
  
  - id: apply_changes
    type: apply_diff
    approve: false